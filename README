OpenTTD console to MySQL gateway
Author: Joel Lehtonen, joel.lehtonen Ã¤t jyu.fi

Description:
------------

A gateway from OpenTTD console to MySQL database. Another project that
has the same goal is Autopilot (http://wiki.openttdcoop.org/Autopilot).
Maybe in future they may use the same database schema. Pick the one
that suits your needs. :-)

Licensing:
----------

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU Affero General Public License as
published by the Free Software Foundation, either version 3 of the
License, or (at your option) any later version.

It is important to notice if you put this logger running on a server
you need to provide your users the source code of this product. If you
haven't made any modifications, you can link to the original git
repository at http://iki.fi/zouppen/repo/openttd-mysql.git . If you
are running a modified copy, you need offer your source code. This can
be done for example by putting a link to the source in your OpenTTD
statistics page.

More information about GNU Affero General Public License can be found
at http://www.gnu.org/licenses/agpl.html .

Installation:
-------------

Download mysql-connector-java from somewhere. Version 5.0 is good enough.
Put jar to your CLASSPATH.

Compile all java files in this directory:

$ javac *.java

Generate tables to your database. Make a new user or give at least
INSERT privilege to that database. You may call the database 'openttd'.
Initial database setup can be found from the file 'misc/initial.sql'.

Fill in database.conf with your favourite editor:

$ cp database.conf.example database.conf
$ emacs database.conf    #or vim, nano, ...

Usage:
------

Start OpenTTD server in a screen or other facility where it is
possible to log everything that server outputs. Start screen with -L
or use the the script set I have made for running OpenTTD dedicated
and scheduled server.

To get company statistics to the database you need a 'whipper' which
pushes a command to the server in periodic intervals. See a file
'misc/whip' for details.

Find a location of your OpenTTD server log and adapt the following
line to your needs:

$ tail -n 0 -f ~/openttd/screenlog.0 | java LogReader

Other notes:
------------

PLEASE NOTE: This thing requires OpenTTD server language to be Finnish
for this thing to work. Switch it to Finnish or fix this software to
parse English messages and mail me a patch. :-)

